{"remainingRequest":"C:\\Users\\HP\\Desktop\\系统\\fontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HP\\Desktop\\系统\\fontend\\src\\views\\index\\components\\Login.vue?vue&type=style&index=0&id=5a020ac7&scoped=true&lang=css","dependencies":[{"path":"C:\\Users\\HP\\Desktop\\系统\\fontend\\src\\views\\index\\components\\Login.vue","mtime":1747060672752},{"path":"C:\\Users\\HP\\Desktop\\系统\\fontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HP\\Desktop\\系统\\fontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\HP\\Desktop\\系统\\fontend\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\HP\\Desktop\\系统\\fontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HP\\Desktop\\系统\\fontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLm15LWRpYWxvZyB7CiAgLyog6Ieq5a6a5LmJ5a+56K+d5qGG5qC35byPICovCiAgYm9yZGVyLXJhZGl1czogNXB4OwogIG92ZXJmbG93OiBoaWRkZW47Cn0KCi5mb3JtLWNvbnRhaW5lciB7CiAgcGFkZGluZzogMjVweCAyNXB4IDAgMjVweDsKICB0ZXh0LWFsaWduOiBsZWZ0Owp9CgoubG9naW4tdGl0bGUgewogIGZvbnQtc2l6ZTogMjRweDsKICBmb250LXdlaWdodDogYm9sZDsKICBtYXJnaW4tYm90dG9tOiAyMHB4OwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBjb2xvcjogIzMzMzsKfQoKLmFuaW1hdGVkLWZvcm0gewogIC8qIOihqOWNleWKqOeUu++8mua3oeWFpeaViOaenCAqLwogIHRyYW5zaXRpb246IG9wYWNpdHkgMC4zcyBlYXNlLWluLW91dCwgdHJhbnNmb3JtIDAuM3MgZWFzZS1pbi1vdXQ7CiAgb3BhY2l0eTogMTsKfQoKLyog6LCD5pW0IEVsZW1lbnQgVUkg57uE5Lu255qE5qC35byPICovCi5lbC1mb3JtLWl0ZW0gewogIG1hcmdpbi1ib3R0b206IDE4cHg7Cn0KCi5lbC1pbnB1dCB7CiAgd2lkdGg6IDEwMCU7Cn0KCi5lbC1pbnB1dF9faW5uZXIgewogIGJvcmRlci1yYWRpdXM6IDRweDsKICBib3JkZXI6IDFweCBzb2xpZCAjY2NjOwogIHBhZGRpbmc6IDEwcHggMTJweDsKICBmb250LXNpemU6IDE0cHg7CiAgY29sb3I6ICM1NTU7Cn0KCi5lbC1pbnB1dF9faW5uZXI6Zm9jdXMgewogIGJvcmRlci1jb2xvcjogIzQwOWVmZjsKICBvdXRsaW5lOiBub25lOwp9CgouZWwtYnV0dG9uLS1wcmltYXJ5IHsKICBjb2xvcjogI2ZmZjsKICBib3JkZXItcmFkaXVzOiA0cHg7CiAgcGFkZGluZzogMTJweCAyMHB4OwogIGZvbnQtc2l6ZTogMTZweDsKfQoKLmVsLWNoZWNrYm94IHsKICB0ZXh0LWFsaWduOiBsZWZ0Owp9CgouZWwtbGluayB7CiAgZm9udC1zaXplOiAxM3B4Owp9CgouZWwtbGluazpob3ZlciB7CiAgY29sb3I6ICM0MDllZmY7Cn0KCi8qIOaWsOWinuagt+W8jyAqLwouY2VudGVyLWxpbmsgewogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKfQoKLmZ1bGwtd2lkdGgtYnV0dG9uIHsKICB3aWR0aDogMTAwJTsgLyog55m75b2V5oyJ6ZKu5Y2g5o2u5pW06KGMICovCn0KCi8qIOenu+mZpCBlbC1mb3JtLWl0ZW0g55qE6buY6K6kIG1hcmdpbi1ib3R0b23vvIzorqnlpI3pgInmoYbjgIHmjInpkq7lkozpk77mjqXmm7TntKflh5EgKi8KLmVsLWZvcm0tLWxhYmVsLXRvcCAuZWwtZm9ybS1pdGVtIHsKICBtYXJnaW4tYm90dG9tOiAxMnB4Owp9Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwQA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views/index/components","sourcesContent":["<template>\n  <div v-if=\"visible\">\n    <el-dialog\n      custom-class=\"my-dialog\"\n      width=\"450px\"\n      :visible=\"true\"\n      :before-close=\"closeDialog\"\n      center\n    >\n      <div class=\"form-container\">\n        <el-form\n          v-if=\"!isRegistering\"\n          ref=\"loginForm\"\n          :model=\"loginForm\"\n          :rules=\"loginRules\"\n          label-width=\"80px\"\n          class=\"animated-form\"\n        >\n          <el-form-item label=\"用户名\" prop=\"username\">\n            <el-input\n              v-model=\"loginForm.username\"\n              placeholder=\"请输入用户名\"\n              prefix-icon=\"el-icon-user\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"密码\" prop=\"password\">\n            <el-input\n              v-model=\"loginForm.password\"\n              type=\"password\"\n              placeholder=\"请输入密码\"\n              prefix-icon=\"el-icon-lock\"\n            ></el-input>\n          </el-form-item>\n\n          <el-form-item>\n            <el-checkbox v-model=\"rememberMe\">记住我</el-checkbox>\n          </el-form-item>\n\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"handleLogin('loginForm')\" class=\"full-width-button\">\n              登录\n            </el-button>\n          </el-form-item>\n\n          <el-form-item class=\"center-link\">\n            <el-link type=\"primary\" @click=\"toggleRegisterForm\">没有账号？点击注册</el-link>\n          </el-form-item>\n        </el-form>\n\n        <el-form\n          v-else\n          ref=\"registerForm\"\n          :model=\"registerForm\"\n          :rules=\"registerRules\"\n          label-width=\"80px\"\n          class=\"animated-form\"\n        >\n          <el-form-item label=\"昵称\" prop=\"nickname\">\n            <el-input\n              v-model=\"registerForm.nickname\"\n              placeholder=\"请输入昵称\"\n              prefix-icon=\"el-icon-edit\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"用户名\" prop=\"username\">\n            <el-input\n              v-model=\"registerForm.username\"\n              placeholder=\"请输入用户名\"\n              prefix-icon=\"el-icon-user\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"密码\" prop=\"password\">\n            <el-input\n              v-model=\"registerForm.password\"\n              type=\"password\"\n              placeholder=\"请输入密码\"\n              prefix-icon=\"el-icon-lock\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"确认密码\" prop=\"confirmPassword\">\n            <el-input\n              v-model=\"registerForm.confirmPassword\"\n              type=\"password\"\n              placeholder=\"请确认密码\"\n              prefix-icon=\"el-icon-lock\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"handleRegister('registerForm')\" class=\"full-width-button\">注册</el-button>\n          </el-form-item>\n          <el-form-item class=\"center-link\">\n            <el-link type=\"primary\" @click=\"toggleRegisterForm\">返回登录</el-link>\n          </el-form-item>\n        </el-form>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { login, register } from \"@/api/user\"\nimport { setToken } from '@/utils/auth'\n\nexport default {\n  name: 'Login',\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      isRegistering: false,\n      loginForm: {\n        username: '',\n        password: ''\n      },\n      registerForm: {\n        username: '',\n        password: '',\n        confirmPassword: ''\n      },\n      rememberMe: false,\n      loginRules: {\n        username: [\n          { required: true, message: '请输入用户名', trigger: 'blur' },\n          { min: 3, max: 20, message: '用户名长度在 3 到 20 个字符', trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: '请输入密码', trigger: 'blur' },\n          { min: 6, max: 30, message: '密码长度在 6 到 30 个字符', trigger: 'blur' }\n        ]\n      },\n      registerRules: {\n        nickname: [\n          { required: true, message: '请输入昵称', trigger: 'blur' },\n          { min: 3, max: 20, message: '昵称长度在 3 到 20 个字符', trigger: 'blur' }\n        ],\n        username: [\n          { required: true, message: '请输入用户名', trigger: 'blur' },\n          { min: 3, max: 20, message: '用户名长度在 3 到 20 个字符', trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: '请输入密码', trigger: 'blur' },\n          { min: 6, max: 30, message: '密码长度在 6 到 30 个字符', trigger: 'blur' }\n        ],\n        confirmPassword: [\n          { required: true, message: '请确认密码', trigger: 'blur' },\n          {\n            validator: (rule, value, callback) => {\n              if (value !== this.registerForm.password) {\n                callback(new Error('两次输入的密码不一致!'))\n              } else {\n                callback()\n              }\n            },\n            trigger: 'blur'\n          }\n        ]\n      }\n    }\n  },\n  methods: {\n    closeDialog() {\n      this.$emit('close')\n    },\n    handleLogin(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          login(this.loginForm)\n            .then((res) => {\n              console.log(res)\n              // 假设 API 返回 { code: 200, message: '登录成功', data: { token: '...' } }\n              if (res.success) {\n                this.$message({\n                  message: res.message || \"登录成功\",\n                  type: \"success\",\n                });\n\n                // 存储 token (如果 API 返回 token)\n                if (res.data && res.data.token) {\n                  console.log(res.data.token)\n                  setToken(res.data.token)\n                }\n\n                // 关闭对话框\n                this.closeDialog();\n                window.location.reload();\n              } else {\n                this.$message({\n                  message: res.message || \"登录失败\",\n                  type: \"error\",\n                });\n              }\n            })\n            .catch((error) => {\n              this.$message({\n                message: error.message || \"登录时发生错误\",\n                type: \"error\",\n              });\n            });\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    handleRegister(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          // 确保密码和确认密码匹配\n          if (this.registerForm.password !== this.registerForm.confirmPassword) {\n            this.$message({\n              message: \"密码和确认密码不匹配\",\n              type: \"error\",\n            });\n            return;\n          }\n\n          register(this.registerForm)\n            .then((res) => {\n              if (res.code === 201) {\n                this.$message({\n                  message: res.message || \"注册成功\",\n                  type: \"success\",\n                });\n\n                // 切换回登录表单\n                this.isRegistering = false;\n              } else {\n                this.$message({\n                  message: res.message || \"注册失败\",\n                  type: \"error\",\n                });\n              }\n            })\n            .catch((error) => {\n              this.$message({\n                message: error.message || \"注册时发生错误\",\n                type: \"error\",\n              });\n            });\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    handleForgotPassword() {\n      // 这里实现忘记密码的逻辑，例如弹出一个重置密码的对话框\n      this.$message({\n        message: '忘记密码功能正在开发中...',\n        type: 'info'\n      });\n    },\n    toggleRegisterForm() {\n      this.isRegistering = !this.isRegistering;\n    }\n  }\n}\n</script>\n\n<style scoped>\n.my-dialog {\n  /* 自定义对话框样式 */\n  border-radius: 5px;\n  overflow: hidden;\n}\n\n.form-container {\n  padding: 25px 25px 0 25px;\n  text-align: left;\n}\n\n.login-title {\n  font-size: 24px;\n  font-weight: bold;\n  margin-bottom: 20px;\n  text-align: center;\n  color: #333;\n}\n\n.animated-form {\n  /* 表单动画：淡入效果 */\n  transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;\n  opacity: 1;\n}\n\n/* 调整 Element UI 组件的样式 */\n.el-form-item {\n  margin-bottom: 18px;\n}\n\n.el-input {\n  width: 100%;\n}\n\n.el-input__inner {\n  border-radius: 4px;\n  border: 1px solid #ccc;\n  padding: 10px 12px;\n  font-size: 14px;\n  color: #555;\n}\n\n.el-input__inner:focus {\n  border-color: #409eff;\n  outline: none;\n}\n\n.el-button--primary {\n  color: #fff;\n  border-radius: 4px;\n  padding: 12px 20px;\n  font-size: 16px;\n}\n\n.el-checkbox {\n  text-align: left;\n}\n\n.el-link {\n  font-size: 13px;\n}\n\n.el-link:hover {\n  color: #409eff;\n}\n\n/* 新增样式 */\n.center-link {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.full-width-button {\n  width: 100%; /* 登录按钮占据整行 */\n}\n\n/* 移除 el-form-item 的默认 margin-bottom，让复选框、按钮和链接更紧凑 */\n.el-form--label-top .el-form-item {\n  margin-bottom: 12px;\n}\n</style>\n\n<!--<style scoped>-->\n<!--.app-main {-->\n<!--  /*50 = navbar  */-->\n<!--  min-height: calc(100vh - 50px);-->\n<!--  /*min-height: 100vh;*/-->\n<!--  width: 100%;-->\n<!--  position: relative;-->\n<!--  overflow: hidden;-->\n<!--  background: #f3f6f9;-->\n<!--}-->\n<!--.fixed-header+.app-main {-->\n<!--  padding-top: 50px;-->\n<!--}-->\n<!--</style>-->\n\n<!--<style lang=\"scss\">-->\n<!--// fix css style bug in open el-dialog-->\n<!--.el-popup-parent&#45;&#45;hidden {-->\n<!--  .fixed-header {-->\n<!--    padding-right: 15px;-->\n<!--  }-->\n<!--}-->\n<!--</style>-->\n"]}]}