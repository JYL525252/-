{"remainingRequest":"C:\\Users\\HP\\Desktop\\系统\\fontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HP\\Desktop\\系统\\fontend\\src\\views\\index\\components\\Sidebar\\index.vue?vue&type=style&index=0&id=07200ebd&lang=scss&scoped=true","dependencies":[{"path":"C:\\Users\\HP\\Desktop\\系统\\fontend\\src\\views\\index\\components\\Sidebar\\index.vue","mtime":1746964386000},{"path":"C:\\Users\\HP\\Desktop\\系统\\fontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HP\\Desktop\\系统\\fontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\HP\\Desktop\\系统\\fontend\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\HP\\Desktop\\系统\\fontend\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HP\\Desktop\\系统\\fontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HP\\Desktop\\系统\\fontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnNpZGViYXItY29udGFpbmVyIHsKICAuZ3JvdXAtbGlzdCB7CiAgICBwYWRkaW5nOiAxMHB4IDEwcHg7CiAgICAuZ3JvdXAtaXRlbSB7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgICBoZWlnaHQ6IDQ0cHg7CiAgICAgIGNvbG9yOiAjZmZmOwogICAgICBib3JkZXItcmFkaXVzOiA4cHg7CiAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKCiAgICAgIC5ncm91cC10aXRsZSB7CiAgICAgICAgY29sb3I6ICNmZmY7CiAgICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgIHBhZGRpbmc6IDEwcHggMTVweDsKICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKCiAgICAgICAgLmljb24gewogICAgICAgICAgY29sb3I6ICNmZmY7CiAgICAgICAgICBmb250LXNpemU6IDE4cHg7CiAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7CiAgICAgICAgfQogICAgICAgIHNwYW57CiAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgICAgIH0KICAgICAgfQogICAgICAuZWwtZHJvcGRvd24gewogICAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgIHJpZ2h0OiAwOwogICAgICAgIHRvcDogNnB4OwogICAgICAgIGJhY2tncm91bmQ6ICMyMDIxMjM7CiAgICAgIH0KICAgICAgLmJ0bi1kcm9wZG93biB7CiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoOTBkZWcpOwogICAgICAgIGNvbG9yOiAjZmZmOwogICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICBkaXNwbGF5OiBibG9jazsKICAgICAgICBwYWRkaW5nOiAxMHB4OwogICAgICB9CiAgICAgICY6aG92ZXIgewogICAgICAgIGJhY2tncm91bmQ6ICMzMzM7CiAgICAgICAgLmVsLWRyb3Bkb3duIHsKICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICAgIH0KICAgICAgfQogICAgICAmLmFjdGl2ZSB7CiAgICAgICAgYmFja2dyb3VuZDogIzM0MzU0MTsKICAgICAgICAuYnRuLWRyb3Bkb3duIHsKICAgICAgICAgIGJhY2tncm91bmQ6ICMzNDM1NDE7CiAgICAgICAgfQogICAgICB9CiAgICAgICYuZ3JvdXAtYWRkIHsKICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjNGQ0ZDRmOwogICAgICB9CiAgICB9CiAgfQp9Ci5tb2JpbGUgewogIC5ncm91cC1pdGVtIHsKICAgICYuYWN0aXZlIHsKICAgICAgLmVsLWRyb3Bkb3duIHsKICAgICAgICBkaXNwbGF5OiBibG9jazsKICAgICAgfQogICAgfQogIH0KfQoK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/index/components/Sidebar","sourcesContent":["<template>\n  <div>\n    <logo v-if=\"showLogo\" :collapse=\"isCollapse\" />\n    <el-scrollbar wrap-class=\"scrollbar-wrapper\">\n      <div class=\"group-list\">\n        <div class=\"group-item group-add\" @click=\"editGroup(0)\">\n          <div class=\"group-title\">\n            <i class=\"icon el-icon-plus\" />\n            <span>创建新对话</span>\n          </div>\n        </div>\n        <div v-for=\"(item, index) in groupList\" class=\"group-item\" :class=\"{active: item.id===activeGroupId}\">\n          <div class=\"group-title\" @click=\"changeGroup(item.id)\">\n            <i class=\"icon el-icon-chat-dot-square\" />\n            <span>{{ item.title }}</span>\n          </div>\n          <el-dropdown trigger=\"click\">\n            <span class=\"el-dropdown-link\">\n              <i class=\"btn-dropdown el-icon-more\" />\n            </span>\n            <el-dropdown-menu slot=\"dropdown\">\n              <el-dropdown-item @click.native.stop=\"editGroup(item.id)\">编辑</el-dropdown-item>\n              <el-dropdown-item @click.native.stop=\"delGroup(item.id)\" class=\"text-danger\">删除</el-dropdown-item>\n            </el-dropdown-menu>\n          </el-dropdown>\n        </div>\n      </div>\n    </el-scrollbar>\n    <group-edit v-if=\"group\" :group=\"group\" @close=\"closeGroupEdit\" @submit=\"saveGroup\" />\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport variables from '@/styles/variables.scss'\nimport { setSiteCode } from '@/utils/auth'\nimport { getGroupList, getGroup, saveGroup, delGroup } from '@/api/group'\nimport groupEdit from './groupEdit'\nimport Logo from './Logo'\n\nexport default {\n  components: { groupEdit, Logo },\n  data() {\n    return {\n      page: 1,\n      pagesize: 20,\n      groupList: [],\n      activeGroupId: 0,\n      msgList: [],\n      group: null\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'sidebar'\n    ]),\n    variables() {\n      return variables\n    },\n    isCollapse() {\n      return !this.sidebar.opened\n    },\n    showLogo() {\n      return this.$store.state.settings.sidebarLogo\n    }\n  },\n  mounted() {\n    this.getGroupList(true)\n  },\n  methods: {\n    changeGroup(group_id) {\n      this.activeGroupId = group_id\n      this.$emit('changeGroupId', group_id)\n    },\n    getGroupList(change = false) {\n      getGroupList({ page: this.page, pagesize: this.pagesize }).then(res => {\n        if (change && res.data.list.length > 0) {\n          this.groupList = []\n          this.changeGroup(res.data.list[0].id)\n        }\n        this.groupList = res.data.list\n        this.groupTotal = res.data.count\n      }).catch(res => {\n        if (res.errno === 403) {\n          this.$emit('showlogin')\n        }\n      })\n    },\n    editGroup(group_id = 0) {\n      if (group_id) {\n        getGroup({\n          id: group_id\n        }).then(res => {\n          this.group = res.data\n        }).catch(res => {\n          if (res.errno === 403) {\n            this.$emit('showlogin')\n          }\n        })\n      } else {\n        this.group = {\n          title: '新的会话'\n        }\n      }\n    },\n    closeGroupEdit() {\n      this.group = null\n    },\n    saveGroup(group) {\n      saveGroup(group).then(res => {\n        if (!this.group.id) {\n          this.page = 1\n          this.getGroupList(true)\n        } else {\n          for (var i in this.groupList) {\n            if (this.groupList[i].id === group.id) {\n              this.groupList[i].title = group.title\n              break\n            }\n          }\n        }\n        this.$forceUpdate()\n\n        this.$message({\n          message: res.message,\n          type: 'success',\n          duration: 1500\n        })\n        this.closeGroupEdit()\n      }).catch(res => {\n        if (res.errno === 403) {\n          this.$emit('showlogin')\n        }\n      })\n    },\n    delGroup(group_id) {\n      this.$confirm('删除后不可恢复，确认删除吗?', '提示', {\n        confirmButtonText: '确定删除',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        delGroup({\n          id: group_id\n        }).then(res => {\n\n          for (var i in this.groupList) {\n            if (this.groupList[i].id === group_id) {\n              this.groupList.splice(i, 1)\n              this.$forceUpdate()\n              break\n            }\n          }\n\n          this.getGroupList()\n          this.$message({\n            message: res.message,\n            type: 'success',\n            duration: 1500\n          })\n        }).catch(res => {\n          if (res.errno === 403) {\n            this.$emit('showlogin')\n          }\n        })\n      })\n    }\n\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n.sidebar-container {\n  .group-list {\n    padding: 10px 10px;\n    .group-item {\n      width: 100%;\n      height: 44px;\n      color: #fff;\n      border-radius: 8px;\n      margin-bottom: 10px;\n      position: relative;\n\n      .group-title {\n        color: #fff;\n        font-size: 16px;\n        white-space: nowrap;\n        overflow: hidden;\n        display: flex;\n        align-items: center;\n        cursor: pointer;\n        padding: 10px 15px;\n        width: 100%;\n        height: 100%;\n        box-sizing: border-box;\n\n        .icon {\n          color: #fff;\n          font-size: 18px;\n          margin-right: 10px;\n        }\n        span{\n          white-space: nowrap;\n        }\n      }\n      .el-dropdown {\n        display: none;\n        position: absolute;\n        right: 0;\n        top: 6px;\n        background: #202123;\n      }\n      .btn-dropdown {\n        transform: rotate(90deg);\n        color: #fff;\n        font-size: 14px;\n        display: block;\n        padding: 10px;\n      }\n      &:hover {\n        background: #333;\n        .el-dropdown {\n          display: block;\n        }\n      }\n      &.active {\n        background: #343541;\n        .btn-dropdown {\n          background: #343541;\n        }\n      }\n      &.group-add {\n        border: 1px solid #4d4d4f;\n      }\n    }\n  }\n}\n.mobile {\n  .group-item {\n    &.active {\n      .el-dropdown {\n        display: block;\n      }\n    }\n  }\n}\n\n</style>\n"]}]}