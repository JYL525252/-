{"remainingRequest":"C:\\Users\\HP\\Desktop\\系统\\fontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HP\\Desktop\\系统\\fontend\\src\\views\\index\\components\\Sidebar\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\HP\\Desktop\\系统\\fontend\\src\\views\\index\\components\\Sidebar\\index.vue","mtime":1746964386000},{"path":"C:\\Users\\HP\\Desktop\\系统\\fontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HP\\Desktop\\系统\\fontend\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\HP\\Desktop\\系统\\fontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HP\\Desktop\\系统\\fontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JwppbXBvcnQgdmFyaWFibGVzIGZyb20gJ0Avc3R5bGVzL3ZhcmlhYmxlcy5zY3NzJwppbXBvcnQgeyBzZXRTaXRlQ29kZSB9IGZyb20gJ0AvdXRpbHMvYXV0aCcKaW1wb3J0IHsgZ2V0R3JvdXBMaXN0LCBnZXRHcm91cCwgc2F2ZUdyb3VwLCBkZWxHcm91cCB9IGZyb20gJ0AvYXBpL2dyb3VwJwppbXBvcnQgZ3JvdXBFZGl0IGZyb20gJy4vZ3JvdXBFZGl0JwppbXBvcnQgTG9nbyBmcm9tICcuL0xvZ28nCgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogeyBncm91cEVkaXQsIExvZ28gfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGFnZTogMSwKICAgICAgcGFnZXNpemU6IDIwLAogICAgICBncm91cExpc3Q6IFtdLAogICAgICBhY3RpdmVHcm91cElkOiAwLAogICAgICBtc2dMaXN0OiBbXSwKICAgICAgZ3JvdXA6IG51bGwKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsKICAgICAgJ3NpZGViYXInCiAgICBdKSwKICAgIHZhcmlhYmxlcygpIHsKICAgICAgcmV0dXJuIHZhcmlhYmxlcwogICAgfSwKICAgIGlzQ29sbGFwc2UoKSB7CiAgICAgIHJldHVybiAhdGhpcy5zaWRlYmFyLm9wZW5lZAogICAgfSwKICAgIHNob3dMb2dvKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuc2V0dGluZ3Muc2lkZWJhckxvZ28KICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldEdyb3VwTGlzdCh0cnVlKQogIH0sCiAgbWV0aG9kczogewogICAgY2hhbmdlR3JvdXAoZ3JvdXBfaWQpIHsKICAgICAgdGhpcy5hY3RpdmVHcm91cElkID0gZ3JvdXBfaWQKICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlR3JvdXBJZCcsIGdyb3VwX2lkKQogICAgfSwKICAgIGdldEdyb3VwTGlzdChjaGFuZ2UgPSBmYWxzZSkgewogICAgICBnZXRHcm91cExpc3QoeyBwYWdlOiB0aGlzLnBhZ2UsIHBhZ2VzaXplOiB0aGlzLnBhZ2VzaXplIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAoY2hhbmdlICYmIHJlcy5kYXRhLmxpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgdGhpcy5ncm91cExpc3QgPSBbXQogICAgICAgICAgdGhpcy5jaGFuZ2VHcm91cChyZXMuZGF0YS5saXN0WzBdLmlkKQogICAgICAgIH0KICAgICAgICB0aGlzLmdyb3VwTGlzdCA9IHJlcy5kYXRhLmxpc3QKICAgICAgICB0aGlzLmdyb3VwVG90YWwgPSByZXMuZGF0YS5jb3VudAogICAgICB9KS5jYXRjaChyZXMgPT4gewogICAgICAgIGlmIChyZXMuZXJybm8gPT09IDQwMykgewogICAgICAgICAgdGhpcy4kZW1pdCgnc2hvd2xvZ2luJykKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgZWRpdEdyb3VwKGdyb3VwX2lkID0gMCkgewogICAgICBpZiAoZ3JvdXBfaWQpIHsKICAgICAgICBnZXRHcm91cCh7CiAgICAgICAgICBpZDogZ3JvdXBfaWQKICAgICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICB0aGlzLmdyb3VwID0gcmVzLmRhdGEKICAgICAgICB9KS5jYXRjaChyZXMgPT4gewogICAgICAgICAgaWYgKHJlcy5lcnJubyA9PT0gNDAzKSB7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3Nob3dsb2dpbicpCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmdyb3VwID0gewogICAgICAgICAgdGl0bGU6ICfmlrDnmoTkvJror50nCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgY2xvc2VHcm91cEVkaXQoKSB7CiAgICAgIHRoaXMuZ3JvdXAgPSBudWxsCiAgICB9LAogICAgc2F2ZUdyb3VwKGdyb3VwKSB7CiAgICAgIHNhdmVHcm91cChncm91cCkudGhlbihyZXMgPT4gewogICAgICAgIGlmICghdGhpcy5ncm91cC5pZCkgewogICAgICAgICAgdGhpcy5wYWdlID0gMQogICAgICAgICAgdGhpcy5nZXRHcm91cExpc3QodHJ1ZSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLmdyb3VwTGlzdCkgewogICAgICAgICAgICBpZiAodGhpcy5ncm91cExpc3RbaV0uaWQgPT09IGdyb3VwLmlkKSB7CiAgICAgICAgICAgICAgdGhpcy5ncm91cExpc3RbaV0udGl0bGUgPSBncm91cC50aXRsZQogICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKQoKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tZXNzYWdlLAogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgZHVyYXRpb246IDE1MDAKICAgICAgICB9KQogICAgICAgIHRoaXMuY2xvc2VHcm91cEVkaXQoKQogICAgICB9KS5jYXRjaChyZXMgPT4gewogICAgICAgIGlmIChyZXMuZXJybm8gPT09IDQwMykgewogICAgICAgICAgdGhpcy4kZW1pdCgnc2hvd2xvZ2luJykKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgZGVsR3JvdXAoZ3JvdXBfaWQpIHsKICAgICAgdGhpcy4kY29uZmlybSgn5Yig6Zmk5ZCO5LiN5Y+v5oGi5aSN77yM56Gu6K6k5Yig6Zmk5ZCXPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrprliKDpmaQnLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBkZWxHcm91cCh7CiAgICAgICAgICBpZDogZ3JvdXBfaWQKICAgICAgICB9KS50aGVuKHJlcyA9PiB7CgogICAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLmdyb3VwTGlzdCkgewogICAgICAgICAgICBpZiAodGhpcy5ncm91cExpc3RbaV0uaWQgPT09IGdyb3VwX2lkKSB7CiAgICAgICAgICAgICAgdGhpcy5ncm91cExpc3Quc3BsaWNlKGksIDEpCiAgICAgICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKQogICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLmdldEdyb3VwTGlzdCgpCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1lc3NhZ2UsCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgZHVyYXRpb246IDE1MDAKICAgICAgICAgIH0pCiAgICAgICAgfSkuY2F0Y2gocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuZXJybm8gPT09IDQwMykgewogICAgICAgICAgICB0aGlzLiRlbWl0KCdzaG93bG9naW4nKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0pCiAgICB9CgogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"index.vue","sourceRoot":"src/views/index/components/Sidebar","sourcesContent":["<template>\n  <div>\n    <logo v-if=\"showLogo\" :collapse=\"isCollapse\" />\n    <el-scrollbar wrap-class=\"scrollbar-wrapper\">\n      <div class=\"group-list\">\n        <div class=\"group-item group-add\" @click=\"editGroup(0)\">\n          <div class=\"group-title\">\n            <i class=\"icon el-icon-plus\" />\n            <span>创建新对话</span>\n          </div>\n        </div>\n        <div v-for=\"(item, index) in groupList\" class=\"group-item\" :class=\"{active: item.id===activeGroupId}\">\n          <div class=\"group-title\" @click=\"changeGroup(item.id)\">\n            <i class=\"icon el-icon-chat-dot-square\" />\n            <span>{{ item.title }}</span>\n          </div>\n          <el-dropdown trigger=\"click\">\n            <span class=\"el-dropdown-link\">\n              <i class=\"btn-dropdown el-icon-more\" />\n            </span>\n            <el-dropdown-menu slot=\"dropdown\">\n              <el-dropdown-item @click.native.stop=\"editGroup(item.id)\">编辑</el-dropdown-item>\n              <el-dropdown-item @click.native.stop=\"delGroup(item.id)\" class=\"text-danger\">删除</el-dropdown-item>\n            </el-dropdown-menu>\n          </el-dropdown>\n        </div>\n      </div>\n    </el-scrollbar>\n    <group-edit v-if=\"group\" :group=\"group\" @close=\"closeGroupEdit\" @submit=\"saveGroup\" />\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport variables from '@/styles/variables.scss'\nimport { setSiteCode } from '@/utils/auth'\nimport { getGroupList, getGroup, saveGroup, delGroup } from '@/api/group'\nimport groupEdit from './groupEdit'\nimport Logo from './Logo'\n\nexport default {\n  components: { groupEdit, Logo },\n  data() {\n    return {\n      page: 1,\n      pagesize: 20,\n      groupList: [],\n      activeGroupId: 0,\n      msgList: [],\n      group: null\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'sidebar'\n    ]),\n    variables() {\n      return variables\n    },\n    isCollapse() {\n      return !this.sidebar.opened\n    },\n    showLogo() {\n      return this.$store.state.settings.sidebarLogo\n    }\n  },\n  mounted() {\n    this.getGroupList(true)\n  },\n  methods: {\n    changeGroup(group_id) {\n      this.activeGroupId = group_id\n      this.$emit('changeGroupId', group_id)\n    },\n    getGroupList(change = false) {\n      getGroupList({ page: this.page, pagesize: this.pagesize }).then(res => {\n        if (change && res.data.list.length > 0) {\n          this.groupList = []\n          this.changeGroup(res.data.list[0].id)\n        }\n        this.groupList = res.data.list\n        this.groupTotal = res.data.count\n      }).catch(res => {\n        if (res.errno === 403) {\n          this.$emit('showlogin')\n        }\n      })\n    },\n    editGroup(group_id = 0) {\n      if (group_id) {\n        getGroup({\n          id: group_id\n        }).then(res => {\n          this.group = res.data\n        }).catch(res => {\n          if (res.errno === 403) {\n            this.$emit('showlogin')\n          }\n        })\n      } else {\n        this.group = {\n          title: '新的会话'\n        }\n      }\n    },\n    closeGroupEdit() {\n      this.group = null\n    },\n    saveGroup(group) {\n      saveGroup(group).then(res => {\n        if (!this.group.id) {\n          this.page = 1\n          this.getGroupList(true)\n        } else {\n          for (var i in this.groupList) {\n            if (this.groupList[i].id === group.id) {\n              this.groupList[i].title = group.title\n              break\n            }\n          }\n        }\n        this.$forceUpdate()\n\n        this.$message({\n          message: res.message,\n          type: 'success',\n          duration: 1500\n        })\n        this.closeGroupEdit()\n      }).catch(res => {\n        if (res.errno === 403) {\n          this.$emit('showlogin')\n        }\n      })\n    },\n    delGroup(group_id) {\n      this.$confirm('删除后不可恢复，确认删除吗?', '提示', {\n        confirmButtonText: '确定删除',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        delGroup({\n          id: group_id\n        }).then(res => {\n\n          for (var i in this.groupList) {\n            if (this.groupList[i].id === group_id) {\n              this.groupList.splice(i, 1)\n              this.$forceUpdate()\n              break\n            }\n          }\n\n          this.getGroupList()\n          this.$message({\n            message: res.message,\n            type: 'success',\n            duration: 1500\n          })\n        }).catch(res => {\n          if (res.errno === 403) {\n            this.$emit('showlogin')\n          }\n        })\n      })\n    }\n\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n.sidebar-container {\n  .group-list {\n    padding: 10px 10px;\n    .group-item {\n      width: 100%;\n      height: 44px;\n      color: #fff;\n      border-radius: 8px;\n      margin-bottom: 10px;\n      position: relative;\n\n      .group-title {\n        color: #fff;\n        font-size: 16px;\n        white-space: nowrap;\n        overflow: hidden;\n        display: flex;\n        align-items: center;\n        cursor: pointer;\n        padding: 10px 15px;\n        width: 100%;\n        height: 100%;\n        box-sizing: border-box;\n\n        .icon {\n          color: #fff;\n          font-size: 18px;\n          margin-right: 10px;\n        }\n        span{\n          white-space: nowrap;\n        }\n      }\n      .el-dropdown {\n        display: none;\n        position: absolute;\n        right: 0;\n        top: 6px;\n        background: #202123;\n      }\n      .btn-dropdown {\n        transform: rotate(90deg);\n        color: #fff;\n        font-size: 14px;\n        display: block;\n        padding: 10px;\n      }\n      &:hover {\n        background: #333;\n        .el-dropdown {\n          display: block;\n        }\n      }\n      &.active {\n        background: #343541;\n        .btn-dropdown {\n          background: #343541;\n        }\n      }\n      &.group-add {\n        border: 1px solid #4d4d4f;\n      }\n    }\n  }\n}\n.mobile {\n  .group-item {\n    &.active {\n      .el-dropdown {\n        display: block;\n      }\n    }\n  }\n}\n\n</style>\n"]}]}